From 831f93ec1c1dbd6c50855bcea0f5787dedd555b0 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Fri, 14 Jul 2017 12:58:53 +0100
Subject: [PATCH 24/33] Add basic CSS loading

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 os-installer-gtk               | 21 +++++++++++++++++++--
 os_installer2/data/styling.css |  9 +++++++++
 2 files changed, 28 insertions(+), 2 deletions(-)
 create mode 100644 os_installer2/data/styling.css

diff --git a/os-installer-gtk b/os-installer-gtk
index 43484b6..ee8c0a6 100755
--- a/os-installer-gtk
+++ b/os-installer-gtk
@@ -15,8 +15,23 @@ import sys
 import os
 from os_installer2.application import InstallerApplication
 from os_installer2.permissions import PermissionsManager
-from os_installer2 import SOURCE_FILESYSTEM
-from gi.repository import Gdk, GObject, Gtk
+from os_installer2 import SOURCE_FILESYSTEM, join_resource_path
+from gi.repository import Gdk, GObject, Gtk, Gio
+
+
+def init_css():
+    """ Set up the CSS before we throw any windows up """
+    try:
+        f = Gio.File.new_for_path(join_resource_path("styling.css"))
+        css = Gtk.CssProvider()
+        css.load_from_file(f)
+        screen = Gdk.Screen.get_default()
+        prio = Gtk.STYLE_PROVIDER_PRIORITY_APPLICATION
+        Gtk.StyleContext.add_provider_for_screen(screen,
+                                                 css,
+                                                 prio)
+    except Exception as e:
+        print("Error loading CSS: {}".format(e))
 
 
 if __name__ == "__main__":
@@ -46,6 +61,8 @@ if __name__ == "__main__":
     GObject.threads_init()
     Gdk.threads_init()
 
+    init_css()
+
     app = InstallerApplication()
     r = app.run(sys.argv)
     sys.exit(r)
diff --git a/os_installer2/data/styling.css b/os_installer2/data/styling.css
new file mode 100644
index 0000000..6305de4
--- /dev/null
+++ b/os_installer2/data/styling.css
@@ -0,0 +1,9 @@
+list {
+    background-image: none;
+    background-color: transparent;
+}
+
+scrolledwindow {
+    background-image: none;
+    background-color: transparent;
+}
-- 
2.13.3

