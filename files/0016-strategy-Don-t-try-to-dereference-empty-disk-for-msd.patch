From 621d8a20a8e0f3ab3c5eaef268df7d2692cbca85 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sun, 23 Apr 2017 15:59:27 +0100
Subject: [PATCH 16/36] strategy: Don't try to dereference empty disk for msdos
 type checks

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 os_installer2/strategy.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/os_installer2/strategy.py b/os_installer2/strategy.py
index 37a3d8c..6922d54 100644
--- a/os_installer2/strategy.py
+++ b/os_installer2/strategy.py
@@ -272,7 +272,8 @@ class EmptyDiskStrategy(DiskStrategy):
             # MBR you can go anywhere you want.
             paths = [
                 (self.dsc(x), x.path) for x in self.dp.drives
-                if x.path != self.drive.path and x.disk.type == "msdos"
+                if x.path != self.drive.path and x.disk is not None and
+                x.disk.type == "msdos"
             ]
             paths.append((self.dsc(self.drive), self.drive.path))
             paths.reverse()
-- 
2.13.3

