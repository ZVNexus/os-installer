From b6925d00f06e22f4b17aa69711147ab0bf613d92 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sun, 12 Jun 2016 12:05:19 +0100
Subject: [PATCH 47/81] Require partitions be explicitly marked resizable (Work
 this out later)

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 os_installer2/diskman.py  | 1 +
 os_installer2/strategy.py | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/os_installer2/diskman.py b/os_installer2/diskman.py
index 5c90f4a..1295bdd 100644
--- a/os_installer2/diskman.py
+++ b/os_installer2/diskman.py
@@ -129,6 +129,7 @@ class SystemPartition:
 
     # Our actual path, i.e. /dev/sda3
     path = None
+    resizable = False
 
     # How much free space remains, in bytes and with string rep
     freespace = None
diff --git a/os_installer2/strategy.py b/os_installer2/strategy.py
index 4896667..6aa6daf 100644
--- a/os_installer2/strategy.py
+++ b/os_installer2/strategy.py
@@ -428,6 +428,8 @@ class DualBootStrategy(DiskStrategy):
                 print("Warning: missing os_part: {}".format(os_part))
                 continue
             partition = self.drive.partitions[os_part]
+            if not partition.resizable:
+                continue
             if partition.size < MIN_REQUIRED_SIZE:
                 continue
             if partition.freespace < MIN_REQUIRED_SIZE:
-- 
2.8.3

