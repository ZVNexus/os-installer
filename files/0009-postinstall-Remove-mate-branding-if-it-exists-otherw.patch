From ca028a297806f5fff1da9cc8325e3f8f3bc8fa68 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Sat, 15 Oct 2016 21:50:24 +0100
Subject: [PATCH 09/12] postinstall: Remove mate branding if it exists,
 otherwise Budgie branding

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 os_installer2/postinstall.py | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/os_installer2/postinstall.py b/os_installer2/postinstall.py
index a35bdfb..05f4891 100644
--- a/os_installer2/postinstall.py
+++ b/os_installer2/postinstall.py
@@ -130,8 +130,13 @@ class PostInstallRemoveLiveConfig(PostInstallStep):
         PostInstallStep.__init__(self, info, installer)
         self.live_packages = [
             "os-installer",
-            "budgie-desktop-branding-livecd"
         ]
+        # Find the branding package to nuke
+        if os.path.exists("/usr/bin/mate-panel"):
+            self.live_packages.append("mate-desktop-branding-livecd")
+        else:
+            self.live_packages.append("budgie-desktop-branding-livecd")
+
         self.original_source = "/usr/share/os-installer"
         self.modified_files = [
             "/etc/lightdm/lightdm.conf",
-- 
2.10.1

